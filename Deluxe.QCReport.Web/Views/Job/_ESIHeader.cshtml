@model Deluxe.QCReport.Web.Models.HomeVM

@{


    var filename = Model.Header_VM.Filename;

}

<div class="bs-callout bs-callout-warning">

    <div class="row">
        <div class="col-xs-3">
            <b style="font-size:14px;">@string.Format("{0} - {1}: Header", Model.Header_VM.Qcnum, Model.Header_VM.subQcnum)</b>
        </div>


        @if (Model.SecurityLevel >= 1)
        {

            <div class="col-xs-6 text-center">

                <button class="btn btn-xs btn-primary CRUDButton" id="btnSave">Save</button>
            </div>

        }


    </div>

    @*<div class="row" style="height:500px; overflow-y:auto;overflow-x:hidden;">*@


        @using (Html.BeginForm("SaveHeaderDetails", "Job", FormMethod.Post, new { @class = "form-horizontal form-group-sm", @style = "margin-top: 20px;", @id = "form_jobdetails" }))
        {
            @Html.HiddenFor(m => m.Header_VM.Qcnum);
            @Html.HiddenFor(m => m.Header_VM.subQcnum);

            <div class="row">


                <div class="col-sm-1 text-right">

                    <label class="control-label">Part:</label>
                </div>

                <div class="col-sm-5 form-group">
                    <div class="row">
                        <div class="col-sm-2 text-right">

                            @Html.TextBoxFor(m => m.Header_VM.This_part, new { @id = "tbThisPart", @class = "form-control", @type = "number" })
                        </div>

                        <div class="col-sm-1 text-right">

                            <label class="control-label">of</label>
                        </div>
                        <div class="col-sm-2 text-right">

                            @Html.TextBoxFor(m => m.Header_VM.Tot_Part, new { @id = "tbTotalParts", @class = "form-control", @type = "number" })
                        </div>
                    </div>
                </div>
            </div>


            <div class="row">
                <div class="col-sm-1 text-right">

                    <label class="control-label">QC Date:</label>
                </div>

                <div class="col-sm-5 form-group">

                    @*@Model.Header_VM.QC_date
                    @Html.HiddenFor(m => m.Header_VM.QC_date)*@

                    <div class="input-group">
                        @Html.TextBoxFor(m => m.Header_VM.QC_date, new { @class = "form-control", @style = "width:150px" })
                        <span class="input-group-btn float-left">
                            <button class="btn btn-xs btn-default" type="button" id="btn_qcDate"><span class="glyphicon glyphicon-calendar" aria-hidden="true"></span></button>
                        </span>
                    </div>

                </div>

                <div class="col-sm-1 text-right">

                    <label class="control-label">Aspect Ratio:</label>
                </div>

                <div class="col-sm-5 form-group">

                    @Html.DropDownListFor(m => m.Header_VM.Aspect, new SelectList(Model.AspectRatioList, "value", "value"), "", new {  @class = "form-control", @style = "width:150px" })
                </div>
            </div>

            <div class="row">
                <div class="col-sm-1 text-right">

                    <label class="control-label">Client Name:</label>
                </div>

                <div class="col-sm-5 form-group">

                    @Html.DropDownListFor(m => m.Header_VM.CustName, new SelectList(Model.ClientNameList, "value", "value"), "", new { @class = "form-control", @style = "width:400px", required = (string)null, maxlength = "50" })
                </div>

                <div class="col-sm-1 text-right">

                    <label class="control-label">Title:</label>
                </div>

                <div class="col-sm-5 form-group">

                    @*@Html.TextBoxFor(m => m.Header_VM.Show, new { @id = "tbShow", @class = "form-control", maxlength = "100", @title = Model.Header_VM.Show })*@
                    @Html.TextAreaFor(m => m.Header_VM.Show, 3, 3, new { @class = "form-control", maxlength = "255", @title = Model.Header_VM.Show })
                </div>
            </div>

            <div class="row">
                <div class="col-sm-1  text-right">

                    <label class="control-label">Episode #:</label>
                </div>

                <div class="col-sm-5 form-group">

                    @Html.TextBoxFor(m => m.Header_VM.Epis_no, new { @id = "tbEpisNo", @class = "form-control", @style = "width:400px", maxlength = "150" })
                </div>

                <div class="col-sm-1 text-right">

                    <label class="control-label">Series:</label>
                </div>

                <div class="col-sm-5 form-group">

                    @*@Html.TextBoxFor(m => m.Header_VM.Show, new { @id = "tbShow", @class = "form-control", maxlength = "100", @title = Model.Header_VM.Show })*@
                    @Html.TextAreaFor(m => m.Header_VM.Epis_name, 3, 3, new { @class = "form-control", maxlength = "255", @title = Model.Header_VM.Epis_name })
                </div>
            </div>

            <div class="row">
                <div class="col-sm-1 text-right">

                    <label class="control-label">Version:</label>
                </div>

                <div class="col-sm-5 form-group">

                    @Html.DropDownListFor(m => m.Header_VM.Version, new SelectList(Model.VersionList, "value", "value"), "", new { @class = "form-control", required = (string)null, @style = "width:150px", maxlength = "255", @title = Model.Header_VM.Version })
                </div>

                <div class="col-sm-1 text-right">

                    <label class="control-label">Format:</label>
                </div>

                <div class="col-sm-5 form-group">

                    @Html.DropDownListFor(m => m.Header_VM.Format, new SelectList(Model.FormatList, "value", "value"), "", new { @class = "form-control", @style = "width:150px" })
                </div>


            </div>

            <div class="row">
                <div class="col-sm-1 text-right">

                    <label class="control-label">Standard:</label>
                </div>

                <div class="col-sm-5 form-group">

                    @Html.DropDownListFor(m => m.Header_VM.Standard, new SelectList(Model.StandardList, "value", "value"), "", new {  @class = "form-control", @style = "width:150px" })
                </div>

                <div class="col-sm-1 text-right">

                    <label class="control-label">T.R.T:</label>
                </div>

                <div class="col-sm-5 form-group">

                    @Html.TextBoxFor(m => m.Header_VM.TRT, new { @id = "tbTRT", @class = "form-control", @style = "width:150px", maxlength = "20" })
                </div>
            </div>

            <div class="row">


                <div class="col-sm-1 text-right">

                    <label class="control-label">Desc:</label>
                </div>

                <div class="col-sm-5 form-group">

                    @Html.DropDownListFor(m => m.Header_VM.TapeDesc1, new SelectList(Model.DescriptionList, "value", "value"), "", new { @class = "form-control", @style = "width:400px", required = (string)null, maxlength = "255", @title = Model.Header_VM.TapeDesc1 })
                </div>

                @if (Model.Header_VM.AssetType.ToLower() == "file")
                {
                    <div class="col-sm-1 text-right">

                        <label class="control-label">File Name:</label>
                    </div>

                    <div class="col-sm-5 form-group">

                        @*@Html.TextBoxFor(m => m.Header_VM.Filename, new { @id = "tbFilename", @class = "form-control", maxlength = "255", @title = Model.Header_VM.Filename })*@
                        @Html.TextAreaFor(m => m.Header_VM.Filename, 3, 3, new { @class = "form-control", maxlength = "255", @title = Model.Header_VM.Filename })
                    </div>
                }
                else
                {
                    <div class="col-sm-1 text-right">

                        <label class="control-label">Tape Number:</label>
                    </div>

                    <div class="col-sm-5 form-group">

                        @Html.TextBoxFor(m => m.Header_VM.TapeNumber, new { @id = "tbTapeNumber", @class = "form-control", @style = "width:400px", maxlength = "50" })
                    </div>
                }
            </div>


        }



    @*</div>*@




</div>

<script>

function setActiveButton() {
    $(".subMenuOnClick").removeClass("subMenuOnClick")
    $("#lnkESIQcHeader").addClass("subMenuOnClick");
    }

    function initializeDatePicker() {
        // setup date picker
        var d = new Date();
        var localtime = d.toLocaleTimeString([], {
            hourCycle: 'h23',
            hour: '2-digit',
            minute: '2-digit',
            second: '2-digit'
        });

        // setup date picker
        var datePickerSettings = {
            inline: true, showAnim: 'slideDown', dateFormat: 'dd/mm/yy ' + localtime
        };

        @* $('#@Html.IdFor(m => m.Header_VM.QC_date)').datepicker(datePickerSettings);
        $("#btn_qcDate").on('click', function () {
            $('#@Html.IdFor(m => m.Header_VM.QC_date)').focus();
        });*@
    }

  $(function () {

    $(function () {

        setActiveButton();
        initializeDatePicker();
        //initializeMultiSelectChecboxList();

        $('#btnSave').on("click", function () {

            //$('.cssload-preloader').fadeIn();
            var myModel = $('#form_jobdetails').serializeObject();

            $.post('/Job/SaveHeaderDetails', { model: myModel }).done(function (data) {

                if (data.success == true) {
                    Msg.success(data.msg, 2 * 1000);
                }
                else {
                    Msg.error(data.msg, 5 * 1000);
                }
            })
            .fail(function (xdata) {

                Msg.error('Error occured! <b>Status:</b> ' + xdata.status + ' <b>Error Message:</b> ' + xdata.statusText, 5 * 1000);
            })
            .always(function () {

                $('.cssload-preloader').hide();
            });
        });
    });

  });

</script>
